sequenceDiagram
    actor Warehouse
    participant StockPage as StockPage (app/(dashboard)/stock/page.tsx)
    participant ProductHook as useAuthedSWR('/products')
    participant TxHook as useAuthedSWR('/stock/transactions')
    participant ApiFetch as apiFetch(...)
    participant Backend as Inventory API

    Warehouse->>StockPage: เปิดเมนู Stock Operations
    StockPage->>ProductHook: useAuthedSWR('/products', token)
    ProductHook->>ApiFetch: apiFetch('/products', { token })
    ApiFetch->>Backend: GET /products
    Backend-->>StockPage: ข้อมูลสินค้า
    StockPage->>TxHook: useAuthedSWR('/stock/transactions', token)
    TxHook->>ApiFetch: apiFetch('/stock/transactions', { token })
    ApiFetch->>Backend: GET /stock/transactions
    Backend-->>StockPage: ประวัติสต็อก

    Warehouse->>StockPage: เปิด modal Stock-In และเลือกสินค้า
    Warehouse->>StockPage: กรอกจำนวน / หมายเหตุ
    StockPage->>StockPage: handleStockIn(event)
    StockPage->>ApiFetch: apiFetch('/stock/in', { method: 'POST', body, token })
    ApiFetch->>Backend: POST /stock/in payload
    Backend-->>ApiFetch: บันทึกสำเร็จ
    ApiFetch-->>StockPage: ผลลัพธ์
    StockPage->>StockPage: form.reset() + setMessage()
    StockPage->>TxHook: mutate()
    TxHook->>ApiFetch: apiFetch('/stock/transactions', { token })
    ApiFetch->>Backend: GET /stock/transactions (refresh)
    Backend-->>StockPage: เพิ่มรายการล่าสุด
    StockPage-->>Warehouse: แสดงข้อความ Stock-In สำเร็จ
