sequenceDiagram
    actor Sales
    participant OrdersPage as OrdersPage (app/(dashboard)/orders/page.tsx)
    participant CustomerHook as useAuthedSWR('/customers')
    participant ProductHook as useAuthedSWR('/products')
    participant ApiFetch as apiFetch('/orders', ...)
    participant Backend as Inventory API

    Sales->>OrdersPage: เปิดเมนู Orders
    OrdersPage->>CustomerHook: useAuthedSWR('/customers', token)
    CustomerHook->>ApiFetch: apiFetch('/customers', { token })
    ApiFetch->>Backend: GET /customers
    Backend-->>OrdersPage: รายชื่อลูกค้า
    OrdersPage->>ProductHook: useAuthedSWR('/products', token)
    ProductHook->>ApiFetch: apiFetch('/products', { token })
    ApiFetch->>Backend: GET /products
    Backend-->>OrdersPage: รายการสินค้า

    Sales->>OrdersPage: กรอกข้อมูล Order แล้ว submit
    OrdersPage->>OrdersPage: handleCreateOrder(event)
    OrdersPage->>ApiFetch: apiFetch('/orders', { method: 'POST', body, token })
    ApiFetch->>Backend: POST /orders payload
    Backend-->>ApiFetch: สร้าง Order สำเร็จ
    ApiFetch-->>OrdersPage: OrderId ใหม่
    OrdersPage->>OrdersPage: form.reset() + setSuccessMessage()
    OrdersPage->>OrdersPage: mutateAll() / mutateConfirmed() / mutateReady()
    loop revalidate SWR keys
        OrdersPage->>ApiFetch: apiFetch('<endpoint>', { token })
        ApiFetch->>Backend: GET ตาม endpoint
        Backend-->>OrdersPage: ข้อมูลอัปเดต
    end
    OrdersPage-->>Sales: แสดง Order ใหม่และ summary
