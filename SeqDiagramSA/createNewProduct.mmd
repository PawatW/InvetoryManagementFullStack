sequenceDiagram
    actor Warehouse as Warehouse/Admin
    participant InventoryPage as InventoryPage (app/(dashboard)/inventory/page.tsx)
    participant SupplierHook as useAuthedSWR('/suppliers')
    participant ProductHook as useAuthedSWR('/products')
    participant Upload as uploadProductImage(file, token)
    participant ApiFetch as apiFetch('/products', ...)
    participant Backend as Inventory API

    Warehouse->>InventoryPage: เปิดเมนู Inventory
    InventoryPage->>SupplierHook: useAuthedSWR('/suppliers', token)
    SupplierHook->>ApiFetch: apiFetch('/suppliers', { token })
    ApiFetch->>Backend: GET /suppliers
    Backend-->>InventoryPage: รายชื่อ Supplier
    InventoryPage->>ProductHook: useAuthedSWR('/products', token)
    ProductHook->>ApiFetch: apiFetch('/products', { token })
    ApiFetch->>Backend: GET /products
    Backend-->>InventoryPage: รายการสินค้า

    Warehouse->>InventoryPage: เปิดฟอร์มเพิ่มสินค้า
    Warehouse->>InventoryPage: อัปโหลดรูป / เลือก Supplier / กรอกข้อมูล
    InventoryPage->>InventoryPage: handleCreateProduct(event)
    alt มีการเลือกไฟล์รูปภาพ
        InventoryPage->>Upload: uploadProductImage(file, token)
        Upload->>Backend: POST /products/upload-image
        Backend-->>Upload: { url }
        Upload-->>InventoryPage: imageUrl
    end
    InventoryPage->>ApiFetch: apiFetch('/products', { method: 'POST', body, token })
    ApiFetch->>Backend: POST /products payload
    Backend-->>ApiFetch: Product ที่สร้างแล้ว
    ApiFetch-->>InventoryPage: ผลลัพธ์สำเร็จ
    InventoryPage->>InventoryPage: form.reset() + setSuccessMessage()
    InventoryPage->>ProductHook: mutate()
    ProductHook->>ApiFetch: apiFetch('/products', { token })
    ApiFetch->>Backend: GET /products (refresh)
    Backend-->>InventoryPage: แสดงสินค้าที่เพิ่มใหม่
